"use strict";$.fn.placeholder=function(){return this.each(function(t){var e=$(this),a=e.parent();"static"===a.css("position")&&a.css("position","relative");var r=e.attr("id");r||(r="placeholder"+t,e.attr("id",r));var o=$('<label class="placeholder"></label>');o.attr("for",r),o.text(e.attr("placeholder"));var s=e.data("class");s&&o.addClass(s);var i=e.position();o.css({position:"absolute",top:i.top,left:i.left,cursor:"text"}),this.value.length&&o.hide(),e.after(o),e.on("focus",function(){o.hide()}).on("blur",function(){""===this.value&&o.show()}),this.attachEvent("onpropertychange",function(){e.val()?o.hide():o.show()})})},$(function(o){"placeholder"in document.createElement("input")||o(":input[placeholder]").placeholder();var s=o("#captchaImage");s.on("click",function(){this.src="captcha.jpg?_="+(new Date).getTime()});var t=o("#login"),i=o("#submit").prop("disabled",!1);t.on("submit",function(t){t.preventDefault();var e=this.account;if(""===e.value)return alert("请输入帐号"),e.focus(),!1;if(!new RegExp(e.getAttribute("pattern")).test(e.value))return alert("帐号格式错误"),e.focus(),!1;var a=this.password;if(""===a.value)return alert("请输入密码"),a.focus(),!1;if(!new RegExp(a.getAttribute("pattern")).test(a.value))return alert("密码格式错误"),a.focus(),!1;var r=this.captcha;return""===r.value?(alert("请输入验证码"),r.focus(),!1):new RegExp(r.getAttribute("pattern")).test(r.value)?(i.prop("disabled",!0).addClass("progress"),void o.ajax({url:this.action,type:"POST",dataType:"json",timeout:800,data:{account:e.value,password:CryptoJS.MD5(a.value).toString(),captcha:r.value}}).done(function(t){t.code?window.location.replace(BACK_URL):(alert(t.msg),s.trigger("click"))}).always(function(){i.prop("disabled",!1).removeClass("progress")})):(alert("验证码格式错误"),r.focus(),!1)})});